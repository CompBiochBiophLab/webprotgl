
import StringIO

from database.pdb_parser import PDBParser
from database.protein import Protein
from database.source import Source

class ProteinTests:
  def __init__(self):
    self.__rcsb = Source(1, "rcsb", "text/pdb", "http://www.rcsb.org/pdb/download/downloadFile.do?fileFormat=pdb&compression=NO&structureId={0}", "RCSB Protein Data Bank")
    self.__protein = Protein()

  def test_parsers(self):
    pdb = PDBParser()
    pdb.parse(StringIO.StringIO("""HEADER    STRUCTURAL PROTEIN                      09-MAR-10   3M3N
TITLE     STRUCTURE OF A LONGITUDINAL ACTIN DIMER ASSEMBLED BY TANDEM W DOMAINS
COMPND    MOL_ID: 1;
COMPND   2 MOLECULE: ACTIN, ALPHA SKELETAL MUSCLE;
COMPND   3 CHAIN: A, B;
COMPND   4 SYNONYM: ALPHA-ACTIN-1;
COMPND   5 MOL_ID: 2;
COMPND   6 MOLECULE: NEURAL WISKOTT-ALDRICH SYNDROME PROTEIN;
COMPND   7 CHAIN: W;
COMPND   8 FRAGMENT: ENGINEERED TANDEM W DOMAIN CONSTRUCT 3W;
COMPND   9 SYNONYM: N-WASP;
COMPND  10 ENGINEERED: YES
SOURCE    MOL_ID: 1;
SOURCE   2 ORGANISM_SCIENTIFIC: ORYCTOLAGUS CUNICULUS;
SOURCE   3 ORGANISM_COMMON: EUROPEAN RABBIT,JAPANESE WHITE RABBIT,DOMESTIC
SOURCE   4 RABBIT,RABBITS;
SOURCE   5 ORGANISM_TAXID: 9986;
SOURCE   6 MOL_ID: 2;
SOURCE   7 ORGANISM_SCIENTIFIC: MUS MUSCULUS;
SOURCE   8 ORGANISM_COMMON: MOUSE;
SOURCE   9 ORGANISM_TAXID: 10090;
SOURCE  10 GENE: WASL;
SOURCE  11 EXPRESSION_SYSTEM: ESCHERICHIA COLI;
SOURCE  12 EXPRESSION_SYSTEM_TAXID: 562;
SOURCE  13 EXPRESSION_SYSTEM_STRAIN: BL21(DE3);
SOURCE  14 EXPRESSION_SYSTEM_VECTOR_TYPE: PLASMID;
SOURCE  15 EXPRESSION_SYSTEM_VECTOR: PTYB11
KEYWDS    ACTIN DIMER, ATP-BINDING, ACTIN CYTOSKELETON, METHYLATION, MUSCLE
KEYWDS   2 PROTEIN, ACTIN-BINDING, MOTOR PROTEIN, STRUCTURAL PROTEIN
EXPDTA    X-RAY DIFFRACTION
AUTHOR    G.REBOWSKI,S.NAMGOONG,R.DOMINGUEZ
REVDAT   3   20-OCT-10 3M3N    1       JRNL
REVDAT   2   15-SEP-10 3M3N    1       JRNL
REVDAT   1   28-JUL-10 3M3N    0
JRNL        AUTH   G.REBOWSKI,S.NAMGOONG,M.BOCZKOWSKA,P.C.LEAVIS,J.NAVAZA,
JRNL        AUTH 2 R.DOMINGUEZ
JRNL        TITL   STRUCTURE OF A LONGITUDINAL ACTIN DIMER ASSEMBLED BY TANDEM
JRNL        TITL 2 W DOMAINS: IMPLICATIONS FOR ACTIN FILAMENT NUCLEATION.
JRNL        REF    J.MOL.BIOL.                   V. 403    11 2010
JRNL        REFN                   ISSN 0022-2836
JRNL        PMID   20804767
JRNL        DOI    10.1016/J.JMB.2010.08.040

"""))

  def test_prepare(self):
    self.__protein.set_source(self.__rcsb)
    self.__protein.fetch("3M3N")

test = ProteinTests()
test.test_parsers()
#test.test_prepare()
